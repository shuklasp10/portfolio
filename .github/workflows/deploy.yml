name: Deploy to OCI

on:
  push:
    branches: ["main"]
  workflow_dispatch:

jobs:
  deploy:
      runs-on: ubuntu-latest
      steps:
        - name: Deploy to OCI VM
          uses: appleboy/ssh-action@v1.0.3
          with:
            host: ${{secrets.OCI_HOST}}
            username: ${{secrets.OCI_USERNAME}}
            key: ${{secrets.OCI_SSH_KEY}}
            script: ~/apps/scripts/deploy_portfolio.sh